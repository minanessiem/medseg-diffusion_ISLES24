# Single-GPU 800K sweep config for extended training experiments
# Double the training duration of 400K runs
#
# Scheduler behavior with 800K steps + 20K absolute warmup:
#   - warmup_cosine_20Ksteps: 20K warmup (same as 400K runs), 780K cosine decay
#   - LR at 300K: ~3.1e-5 (still learning strongly)
#   - LR at 400K: ~2.5e-5 (midpoint)
#   - LR at 800K: ~0 (training complete)
#
# Usage: python3 -m scripts.slurm.single_job_runner --config-name cluster_800K_sweep --gpus 1 \
#   --overrides optimizer=adamw_5e5lr_wd00

defaults:
  - cluster                              # base cluster environment
  - override /model: medsegdiff_256_4l_32c_6x4a_128t_1btl_medium_simple
  - override /loss: multitask_equal
  - override /augmentation: aggressive_2d
  - override /training: train_800Kms_ampbfloat16
  - override /scheduler: warmup_cosine_20Ksteps
  - override /diffusion: openai_ddim_50steps
  - override /logging: ddim_50steps
  - override /validation: default

# Override environment settings for single-GPU training
environment:
  dataset:
    train_batch_size: 24
  training:
    output_root: '/mnt/outputs/medsegdiff_800K_sweep/'


