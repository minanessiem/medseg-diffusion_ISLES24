# Official MedSegDiff-B (Base) variant
# 5 downsample levels, 128 base channels
# Reference: MedSegDiff paper, Section "Implementation Details"
#
# Use with: loss=mse_with_calibration

architecture: "org_medsegdiff"
version: "new"  # UNetModel_newpreview

# Core dimensions
image_size: 256
model_channels: 128
out_channels: 1     # Noise prediction channel

# Architecture depth - B uses 5 downsamples
num_res_blocks: 2
channel_mult: "1,2,4,4,8"
attention_resolutions: "16,8"

# Attention configuration
num_heads: 4
num_head_channels: -1
num_heads_upsample: -1

# Training options
use_scale_shift_norm: true
dropout: 0.0
use_checkpoint: false
use_fp16: false
resblock_updown: false
use_new_attention_order: false

# Highway network (produces calibration output)
highway:
  enabled: true

# Channel configuration (uses Hydra interpolation from dataset)
mask_channels: 1
image_channels: ${dataset.num_modalities}  # Auto-derived from dataset modalities

